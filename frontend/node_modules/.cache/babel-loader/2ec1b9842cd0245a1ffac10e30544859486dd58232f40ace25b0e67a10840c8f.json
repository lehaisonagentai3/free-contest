{"ast":null,"code":"import _objectSpread from\"/Users/maianhnguyen/go/src/github.com/lehaisonagentai3/free-contest/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import{getOfficerSubjectTest,startTest,submitTest}from'../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TestPage=_ref=>{var _test$subject2,_test$officer2,_test$questions2,_test$questions3;let{officerId}=_ref;const{subjectId}=useParams();const navigate=useNavigate();const[test,setTest]=useState(null);const[answers,setAnswers]=useState({});const[remainingTime,setRemainingTime]=useState(0);const[loading,setLoading]=useState(true);const[submitting,setSubmitting]=useState(false);const[error,setError]=useState('');const[testStarted,setTestStarted]=useState(false);const fetchTest=useCallback(async()=>{if(!subjectId)return;try{setLoading(true);const testData=await getOfficerSubjectTest(officerId,subjectId);setTest(testData);// Check if test has already started\nif(testData.start_time&&testData.start_time>0){setTestStarted(true);setRemainingTime(testData.remaining_time||0);}}catch(err){setError('Không thể tải bài thi. Vui lòng thử lại.');console.error('Error fetching test:',err);}finally{setLoading(false);}},[officerId,subjectId]);useEffect(()=>{fetchTest();},[fetchTest]);const handleSubmit=useCallback(async()=>{if(submitting||!test)return;const unansweredQuestions=test.questions.filter(q=>!answers[q.id]);if(unansweredQuestions.length>0){const confirm=window.confirm(\"B\\u1EA1n c\\xF2n \".concat(unansweredQuestions.length,\" c\\xE2u h\\u1ECFi ch\\u01B0a tr\\u1EA3 l\\u1EDDi. B\\u1EA1n c\\xF3 mu\\u1ED1n n\\u1ED9p b\\xE0i kh\\xF4ng?\"));if(!confirm)return;}try{setSubmitting(true);const submission=await submitTest(officerId,test.id,answers);// Store submission data for result page\nlocalStorage.setItem('lastSubmission',JSON.stringify(submission));navigate('/result');}catch(err){setError('Không thể nộp bài thi. Vui lòng thử lại.');console.error('Error submitting test:',err);}finally{setSubmitting(false);}},[submitting,test,answers,officerId,navigate]);// Timer countdown\nuseEffect(()=>{if(!testStarted||remainingTime<=0)return;const timer=setInterval(()=>{setRemainingTime(prev=>{if(prev<=1){// Auto submit when time runs out\nhandleSubmit();return 0;}return prev-1;});},1000);return()=>clearInterval(timer);},[testStarted,remainingTime,handleSubmit]);const handleStartTest=async()=>{if(!test)return;try{setLoading(true);const startedTest=await startTest(officerId,test.id);setTest(startedTest);setTestStarted(true);setRemainingTime(startedTest.remaining_time||0);}catch(err){setError('Không thể bắt đầu bài thi. Vui lòng thử lại.');console.error('Error starting test:',err);}finally{setLoading(false);}};const handleAnswerChange=(questionId,answer)=>{setAnswers(prev=>_objectSpread(_objectSpread({},prev),{},{[questionId]:answer}));};const formatTime=seconds=>{const hours=Math.floor(seconds/3600);const minutes=Math.floor(seconds%3600/60);const secs=seconds%60;if(hours>0){return\"\".concat(hours,\":\").concat(minutes.toString().padStart(2,'0'),\":\").concat(secs.toString().padStart(2,'0'));}return\"\".concat(minutes,\":\").concat(secs.toString().padStart(2,'0'));};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0110ang t\\u1EA3i b\\xE0i thi...\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/select-subject'),className:\"btn\",children:\"Quay l\\u1EA1i ch\\u1ECDn m\\xF4n thi\"})]});}if(!test){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y b\\xE0i thi.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/select-subject'),className:\"btn\",children:\"Quay l\\u1EA1i ch\\u1ECDn m\\xF4n thi\"})]});}if(!testStarted){var _test$subject,_test$questions,_test$officer;return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"B\\xE0i thi \",(_test$subject=test.subject)===null||_test$subject===void 0?void 0:_test$subject.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Th\\u1EDDi gian: \",test.duration?Math.floor(test.duration/60):0,\" ph\\xFAt\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"S\\u1ED1 c\\xE2u h\\u1ECFi: \",((_test$questions=test.questions)===null||_test$questions===void 0?void 0:_test$questions.length)||0]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"C\\xE1n b\\u1ED9: \",(_test$officer=test.officer)===null||_test$officer===void 0?void 0:_test$officer.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:'30px 0'},children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"H\\u01B0\\u1EDBng d\\u1EABn:\"})}),/*#__PURE__*/_jsxs(\"ul\",{style:{textAlign:'left',display:'inline-block'},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Tr\\u1EA3 l\\u1EDDi t\\u1EA5t c\\u1EA3 c\\xE1c c\\xE2u h\\u1ECFi m\\u1ED9t c\\xE1ch t\\u1ED1t nh\\u1EA5t\"}),/*#__PURE__*/_jsx(\"li\",{children:\"B\\u1EA1n c\\xF3 th\\u1EC3 thay \\u0111\\u1ED5i c\\xE2u tr\\u1EA3 l\\u1EDDi tr\\u01B0\\u1EDBc khi n\\u1ED9p b\\xE0i\"}),/*#__PURE__*/_jsx(\"li\",{children:\"B\\xE0i thi s\\u1EBD t\\u1EF1 \\u0111\\u1ED9ng n\\u1ED9p khi h\\u1EBFt th\\u1EDDi gian\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0110\\u1EA3m b\\u1EA3o b\\u1EA1n c\\xF3 k\\u1EBFt n\\u1ED1i internet \\u1ED5n \\u0111\\u1ECBnh\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStartTest,className:\"btn btn-success\",children:\"B\\u1EAFt \\u0111\\u1EA7u thi\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[remainingTime>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"timer\",children:[\"Th\\u1EDDi gian c\\xF2n l\\u1EA1i: \",formatTime(remainingTime)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"B\\xE0i thi \",(_test$subject2=test.subject)===null||_test$subject2===void 0?void 0:_test$subject2.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"C\\xE1n b\\u1ED9: \",(_test$officer2=test.officer)===null||_test$officer2===void 0?void 0:_test$officer2.name,\" | S\\u1ED1 c\\xE2u h\\u1ECFi: \",((_test$questions2=test.questions)===null||_test$questions2===void 0?void 0:_test$questions2.length)||0]})]}),test.questions&&test.questions.map((question,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"question-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question-title\",children:[\"C\\xE2u \",index+1,\": \",question.content]}),/*#__PURE__*/_jsx(\"div\",{children:['A','B','C','D'].map(option=>{const answerKey=\"answer_\".concat(option.toLowerCase());const answerText=question[answerKey];if(!answerText)return null;return/*#__PURE__*/_jsxs(\"label\",{className:\"answer-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"question_\".concat(question.id),value:option,checked:answers[question.id]===option,onChange:e=>handleAnswerChange(question.id,e.target.value)}),/*#__PURE__*/_jsxs(\"span\",{children:[option,\". \",answerText]})]},option);})})]},question.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0110\\xE3 tr\\u1EA3 l\\u1EDDi: \",Object.keys(answers).length,\" / \",((_test$questions3=test.questions)===null||_test$questions3===void 0?void 0:_test$questions3.length)||0,\" c\\xE2u h\\u1ECFi\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"btn btn-success\",disabled:submitting,style:{fontSize:'18px',padding:'16px 32px'},children:submitting?'Đang nộp bài...':'Nộp bài thi'}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px',color:'#666'},children:/*#__PURE__*/_jsx(\"p\",{children:\"H\\xE3y ki\\u1EC3m tra l\\u1EA1i c\\xE2u tr\\u1EA3 l\\u1EDDi tr\\u01B0\\u1EDBc khi n\\u1ED9p b\\xE0i.\"})})]})]});};export default TestPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","getOfficerSubjectTest","startTest","submitTest","jsx","_jsx","jsxs","_jsxs","TestPage","_ref","_test$subject2","_test$officer2","_test$questions2","_test$questions3","officerId","subjectId","navigate","test","setTest","answers","setAnswers","remainingTime","setRemainingTime","loading","setLoading","submitting","setSubmitting","error","setError","testStarted","setTestStarted","fetchTest","testData","start_time","remaining_time","err","console","handleSubmit","unansweredQuestions","questions","filter","q","id","length","confirm","window","concat","submission","localStorage","setItem","JSON","stringify","timer","setInterval","prev","clearInterval","handleStartTest","startedTest","handleAnswerChange","questionId","answer","_objectSpread","formatTime","seconds","hours","Math","floor","minutes","secs","toString","padStart","className","children","onClick","_test$subject","_test$questions","_test$officer","style","textAlign","subject","name","duration","officer","margin","display","map","question","index","content","option","answerKey","toLowerCase","answerText","type","value","checked","onChange","e","target","marginBottom","Object","keys","disabled","fontSize","padding","marginTop","color"],"sources":["/Users/maianhnguyen/go/src/github.com/lehaisonagentai3/free-contest/frontend/src/pages/TestPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { getOfficerSubjectTest, startTest, submitTest } from '../api/api';\nimport { Test, TestAnswers, TestPageProps } from '../types/api';\n\nconst TestPage: React.FC<TestPageProps> = ({ officerId }) => {\n  const { subjectId } = useParams<{ subjectId: string }>();\n  const navigate = useNavigate();\n  \n  const [test, setTest] = useState<Test | null>(null);\n  const [answers, setAnswers] = useState<TestAnswers>({});\n  const [remainingTime, setRemainingTime] = useState<number>(0);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [submitting, setSubmitting] = useState<boolean>(false);\n  const [error, setError] = useState<string>('');\n  const [testStarted, setTestStarted] = useState<boolean>(false);\n\n  const fetchTest = useCallback(async (): Promise<void> => {\n    if (!subjectId) return;\n    \n    try {\n      setLoading(true);\n      const testData = await getOfficerSubjectTest(officerId, subjectId);\n      setTest(testData);\n      \n      // Check if test has already started\n      if (testData.start_time && testData.start_time > 0) {\n        setTestStarted(true);\n        setRemainingTime(testData.remaining_time || 0);\n      }\n    } catch (err) {\n      setError('Không thể tải bài thi. Vui lòng thử lại.');\n      console.error('Error fetching test:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [officerId, subjectId]);\n\n  useEffect(() => {\n    fetchTest();\n  }, [fetchTest]);\n\n  const handleSubmit = useCallback(async (): Promise<void> => {\n    if (submitting || !test) return;\n    \n    const unansweredQuestions = test.questions.filter(q => !answers[q.id]);\n    if (unansweredQuestions.length > 0) {\n      const confirm = window.confirm(\n        `Bạn còn ${unansweredQuestions.length} câu hỏi chưa trả lời. Bạn có muốn nộp bài không?`\n      );\n      if (!confirm) return;\n    }\n\n    try {\n      setSubmitting(true);\n      const submission = await submitTest(officerId, test.id, answers);\n      \n      // Store submission data for result page\n      localStorage.setItem('lastSubmission', JSON.stringify(submission));\n      navigate('/result');\n    } catch (err) {\n      setError('Không thể nộp bài thi. Vui lòng thử lại.');\n      console.error('Error submitting test:', err);\n    } finally {\n      setSubmitting(false);\n    }\n  }, [submitting, test, answers, officerId, navigate]);\n\n  // Timer countdown\n  useEffect(() => {\n    if (!testStarted || remainingTime <= 0) return;\n\n    const timer = setInterval(() => {\n      setRemainingTime(prev => {\n        if (prev <= 1) {\n          // Auto submit when time runs out\n          handleSubmit();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [testStarted, remainingTime, handleSubmit]);\n\n  const handleStartTest = async (): Promise<void> => {\n    if (!test) return;\n    \n    try {\n      setLoading(true);\n      const startedTest = await startTest(officerId, test.id);\n      setTest(startedTest);\n      setTestStarted(true);\n      setRemainingTime(startedTest.remaining_time || 0);\n    } catch (err) {\n      setError('Không thể bắt đầu bài thi. Vui lòng thử lại.');\n      console.error('Error starting test:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAnswerChange = (questionId: number, answer: string): void => {\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: answer\n    }));\n  };\n\n  const formatTime = (seconds: number): string => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n    \n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container\">\n        <div className=\"loading\">Đang tải bài thi...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container\">\n        <div className=\"error-message\">{error}</div>\n        <button onClick={() => navigate('/select-subject')} className=\"btn\">\n          Quay lại chọn môn thi\n        </button>\n      </div>\n    );\n  }\n\n  if (!test) {\n    return (\n      <div className=\"container\">\n        <div className=\"error-message\">Không tìm thấy bài thi.</div>\n        <button onClick={() => navigate('/select-subject')} className=\"btn\">\n          Quay lại chọn môn thi\n        </button>\n      </div>\n    );\n  }\n\n  if (!testStarted) {\n    return (\n      <div className=\"container\">\n        <div className=\"card\" style={{ textAlign: 'center' }}>\n          <h2>Bài thi {test.subject?.name}</h2>\n          <p>Thời gian: {test.duration ? Math.floor(test.duration / 60) : 0} phút</p>\n          <p>Số câu hỏi: {test.questions?.length || 0}</p>\n          <p>Cán bộ: {test.officer?.name}</p>\n          \n          <div style={{ margin: '30px 0' }}>\n            <p><strong>Hướng dẫn:</strong></p>\n            <ul style={{ textAlign: 'left', display: 'inline-block' }}>\n              <li>Trả lời tất cả các câu hỏi một cách tốt nhất</li>\n              <li>Bạn có thể thay đổi câu trả lời trước khi nộp bài</li>\n              <li>Bài thi sẽ tự động nộp khi hết thời gian</li>\n              <li>Đảm bảo bạn có kết nối internet ổn định</li>\n            </ul>\n          </div>\n          \n          <button onClick={handleStartTest} className=\"btn btn-success\">\n            Bắt đầu thi\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      {/* Timer */}\n      {remainingTime > 0 && (\n        <div className=\"timer\">\n          Thời gian còn lại: {formatTime(remainingTime)}\n        </div>\n      )}\n\n      <div className=\"card\">\n        <h2>Bài thi {test.subject?.name}</h2>\n        <p>Cán bộ: {test.officer?.name} | Số câu hỏi: {test.questions?.length || 0}</p>\n      </div>\n\n      {/* Questions */}\n      {test.questions && test.questions.map((question, index) => (\n        <div key={question.id} className=\"question-card\">\n          <div className=\"question-title\">\n            Câu {index + 1}: {question.content}\n          </div>\n          \n          <div>\n            {(['A', 'B', 'C', 'D'] as const).map(option => {\n              const answerKey = `answer_${option.toLowerCase()}` as keyof typeof question;\n              const answerText = question[answerKey] as string;\n              \n              if (!answerText) return null;\n              \n              return (\n                <label key={option} className=\"answer-option\">\n                  <input\n                    type=\"radio\"\n                    name={`question_${question.id}`}\n                    value={option}\n                    checked={answers[question.id] === option}\n                    onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n                  />\n                  <span>{option}. {answerText}</span>\n                </label>\n              );\n            })}\n          </div>\n        </div>\n      ))}\n\n      {/* Submit Button */}\n      <div className=\"card\" style={{ textAlign: 'center' }}>\n        <div style={{ marginBottom: '20px' }}>\n          <p>\n            Đã trả lời: {Object.keys(answers).length} / {test.questions?.length || 0} câu hỏi\n          </p>\n        </div>\n        \n        <button \n          onClick={handleSubmit}\n          className=\"btn btn-success\"\n          disabled={submitting}\n          style={{ fontSize: '18px', padding: '16px 32px' }}\n        >\n          {submitting ? 'Đang nộp bài...' : 'Nộp bài thi'}\n        </button>\n        \n        <div style={{ marginTop: '20px', color: '#666' }}>\n          <p>Hãy kiểm tra lại câu trả lời trước khi nộp bài.</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TestPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}